(self.webpackChunkplanning_poker_free=self.webpackChunkplanning_poker_free||[]).push([[391],{391:(e,t,n)=>{"use strict";n.r(t),n.d(t,{WorkspacesModule:()=>F});var r=n(6304),a=n(3605),i=n(7570),s=n(7368),o=n(9996);class c{constructor(e){this.code=e.code,this.name=e.name,this.status=e.status}}var p=n(5320);let m=(()=>{class e{constructor(e){this.firestore=e}addTeam(e){var t=this;return(0,r.Z)(function*(){const n=yield t.firestore.collection("teams").doc();yield n.set({name:e,status:!0}),yield n.collection("game").doc("details").set({users:[]})})()}teams(){return this.firestore.collection("teams").snapshotChanges().pipe((0,o.U)(e=>e.map(e=>{const t=e.payload.doc.data().name,n=e.payload.doc.data().status;return new c({name:t,code:e.payload.doc.id,status:n})})))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(p.ST))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var d=n(63);let l=(()=>{class e{constructor(e,t){this.teamsService=e,this.router=t,this.teams=[],this.teamSearchResults=[],this.noTeams=!1,this.messageNoTeams="",this.subscription=new i.w}getTeams(){const e=this.teamsService.teams().subscribe(e=>{this.teams=e,this.teamSearchResults=this.teams.slice(0,10),this.showMessageNoTeams(!this.teams.length,!1)});this.subscription.add(e)}redirectGame(e){var t=this;return(0,r.Z)(function*(){yield t.router.navigateByUrl(`${a.y.GAME}/${e}`)})()}searchTeam(e){return this.teamSearchResults=this.teams.filter(t=>t.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())).slice(0,10)}showMessageNoTeams(e,t){e&&!this.teamSearchResults.length?(this.noTeams=!0,this.messageNoTeams=t?"No se encontr\xf3 resultados":"No hay equipos registrados"):this.teams.length?this.noTeams=!1:(this.noTeams=!0,this.messageNoTeams="No hay equipos registrados")}unsubscribe(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(m),s.LFG(d.F0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var u=n(5291),h=n(1462),f=n(8720),g=n(1608);let _=(()=>{class e{constructor(e){this.fb=e,this.teamToFind=new s.vpe,this.working=new s.vpe,this.iconSearch=u.wn1,this.form=this.fb.group({searchWord:new h.NI("",h.kI.pattern("[A-Za-z]+_"))})}get searchedTeamName(){return this.form.get("searchWord")}ngOnInit(){var e;null===(e=this.searchedTeamName)||void 0===e||e.valueChanges.pipe((0,f.x)()).subscribe(e=>{this.teamToFind.emit(e),this.working.emit(!!e.length)})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(h.qu))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ppf-searcher"]],outputs:{teamToFind:"teamToFind",working:"working"},decls:3,vars:2,consts:[[1,"search",3,"formGroup"],["type","text","placeholder","Buscar equipo","formControlName","searchWord",1,"search__input"],[1,"search__icon",3,"icon"]],template:function(e,t){1&e&&(s.TgZ(0,"form",0),s._UZ(1,"input",1),s._UZ(2,"fa-icon",2),s.qZA()),2&e&&(s.Q6J("formGroup",t.form),s.xp6(2),s.Q6J("icon",t.iconSearch))},directives:[h._Y,h.JL,h.sg,h.Fj,h.JJ,h.u,g.BN],styles:[".search__input[_ngcontent-%COMP%]{padding:12px 44px 12px 24px;font-size:18px;line-height:18px;border-radius:10px;outline:none;border:1px solid #000;font-family:Montserrat,sans-serif;margin-right:-16px}@media (max-width:575px){.search__input[_ngcontent-%COMP%]{width:140px}}@media (min-width:576px){.search__input[_ngcontent-%COMP%]{width:350px}}@media (min-width:768px){.search__input[_ngcontent-%COMP%]{width:400px}}@media (min-width:992px){.search__input[_ngcontent-%COMP%]{width:500px}}.search__icon[_ngcontent-%COMP%]{position:relative;right:28px}"]}),e})();var x=n(1116);let w=(()=>{class e{constructor(){this.default=()=>({title:"\xa1Oh No!",text:"Ocurrio un error inesperado"}),this.requiredDataPopup=()=>({title:"\xa1Oh No!",text:"Al parecer falta escribir el nombre del equipo"}),this.minLengthDataPopup=()=>({title:"\xa1Oh No!",text:"Al parecer el nombre de tu equipo es demasiado corto"}),this.maxLengthDataPopup=()=>({title:"\xa1Oh No!",text:"Al parecer el nombre de tu equipo es demasiado largo"}),this.patternDataPopup=()=>({title:"\xa1Oh No!",text:"Al parecer solo se aceptan letras"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var C=n(7756),M=n(7017);const O=["input"];function v(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"p",3),s.NdJ("click",function(){return s.CHM(e),s.oxw().toCreate()}),s._uU(1,"+"),s.qZA()}}function P(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"form",4),s._UZ(1,"input",5,6),s.TgZ(3,"div",7),s.TgZ(4,"fa-icon",8),s.NdJ("click",function(){return s.CHM(e),s.oxw().confirmCreate()}),s.qZA(),s.TgZ(5,"fa-icon",9),s.NdJ("click",function(){return s.CHM(e),s.oxw().cancelCreate()}),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("formGroup",e.formGroup),s.xp6(4),s.Q6J("icon",e.iconConfirm),s.xp6(1),s.Q6J("icon",e.iconCancel)}}let T=(()=>{class e{constructor(e,t,n,r){this.fb=e,this.error=t,this.teamsService=n,this.popup=r,this.creating=!1,this.iconConfirm=u.f8k,this.iconCancel=u.nYk,this.formGroup=this.fb.group({nameTeam:new h.NI("",[h.kI.required,h.kI.minLength(2),h.kI.maxLength(7),h.kI.pattern("[a-zA-Z&+@ ]*")])})}get nameTeamField(){return this.formGroup.get("nameTeam")}get nameTeamErrorMessage(){return this.nameTeamField.hasError("minlength")?this.error.minLengthDataPopup():this.nameTeamField.hasError("maxlength")?this.error.maxLengthDataPopup():this.nameTeamField.hasError("required")?this.error.requiredDataPopup():this.nameTeamField.hasError("pattern")?this.error.patternDataPopup():this.error.default()}toCreate(){this.creating=!0,setTimeout(()=>{var e;null===(e=this.input)||void 0===e||e.nativeElement.focus()},50)}confirmCreate(){var e;if(this.formGroup.invalid)return this.popup.open(C.B,{data:this.nameTeamErrorMessage,lifeTime:5e3}),null===(e=this.input)||void 0===e||e.nativeElement.select(),!1;this.creating=!1,this.teamsService.addTeam(this.nameTeamField.value).then(()=>{this.popup.closeAll(),this.nameTeamField.patchValue(null)})}cancelCreate(){this.creating=!1,this.popup.closeAll(),this.nameTeamField.patchValue(null)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(h.qu),s.Y36(w),s.Y36(m),s.Y36(M.q))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ppf-card-to-add"]],viewQuery:function(e,t){if(1&e&&s.Gf(O,5),2&e){let e;s.iGM(e=s.CRH())&&(t.input=e.first)}},features:[s._Bn([w])],decls:3,vars:2,consts:[[1,"card"],["class","card__add",3,"click",4,"ngIf"],["class","card__form",3,"formGroup",4,"ngIf"],[1,"card__add",3,"click"],[1,"card__form",3,"formGroup"],["type","text","formControlName","nameTeam","maxlength","7","placeholder","Equipo","autofocus","",1,"card__form--team"],["input",""],[1,"card__form--buttons"],[1,"icon","confirm",3,"icon","click"],[1,"icon","cancel",3,"icon","click"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.YNc(1,v,2,0,"p",1),s.YNc(2,P,6,3,"form",2),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",!t.creating),s.xp6(1),s.Q6J("ngIf",t.creating))},directives:[x.O5,h._Y,h.JL,h.sg,h.Fj,h.JJ,h.u,h.nD,g.BN],styles:[".card[_ngcontent-%COMP%]{display:flex;border:.5px dashed grey;align-items:center;justify-content:center;flex-direction:column;height:150px;border-radius:25px;background-color:#fff;overflow:hidden;margin:20px;font-size:70px;color:grey}@media (max-width:575px){.card[_ngcontent-%COMP%]{width:250px}}@media (min-width:576px){.card[_ngcontent-%COMP%]{width:350px}}@media (min-width:768px){.card[_ngcontent-%COMP%]{width:300px}}@media (min-width:992px){.card[_ngcontent-%COMP%]{width:400px}}.card__add[_ngcontent-%COMP%]{cursor:pointer;margin:0;font-weight:700;transition:all .2s ease-in-out}.card__add[_ngcontent-%COMP%]:hover{font-size:80px}.card__form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.card__form--team[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:700;width:350px;letter-spacing:15px;text-align:center;border:0 solid;margin-bottom:15px;outline:none;text-transform:uppercase}@media (max-width:575px){.card__form--team[_ngcontent-%COMP%]{font-size:25px}}@media (min-width:576px){.card__form--team[_ngcontent-%COMP%]{font-size:30px}}@media (min-width:768px){.card__form--team[_ngcontent-%COMP%]{font-size:30px}}@media (min-width:992px){.card__form--team[_ngcontent-%COMP%]{font-size:40px}}.card__form--buttons[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;margin-top:85px}.card__form--buttons[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer;font-size:30px;transition:all .2s ease-in-out}.card__form--buttons[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{font-size:40px}.card__form--buttons[_ngcontent-%COMP%]   .confirm[_ngcontent-%COMP%]{position:absolute;color:green;margin-right:60px}.card__form--buttons[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{position:absolute;color:red;margin-left:60px}"]}),e})(),b=(()=>{class e{constructor(){this.teamName="",this.active=!1,this.iconStatus=u.diR}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["ppf-card-team"]],inputs:{teamName:"teamName",active:"active"},decls:4,vars:3,consts:[[1,"card"],[1,"card__team-name"],[1,"card__team-status",3,"icon","ngClass"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"h2",1),s._uU(2),s.qZA(),s._UZ(3,"fa-icon",2),s.qZA()),2&e&&(s.xp6(2),s.Oqu(t.teamName),s.xp6(1),s.Q6J("icon",t.iconStatus)("ngClass",t.active?"active":"inactive"))},directives:[g.BN,x.mk],styles:[".card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;height:150px;border-radius:25px;background-color:#fff;box-shadow:2px 0 30px rgba(0,0,0,.15);overflow:hidden;margin:20px;cursor:pointer;transition:all .2s ease-in-out}@media (max-width:575px){.card[_ngcontent-%COMP%]{width:250px}}@media (min-width:576px){.card[_ngcontent-%COMP%]{width:350px}}@media (min-width:768px){.card[_ngcontent-%COMP%]{width:300px}}@media (min-width:992px){.card[_ngcontent-%COMP%]{width:400px}}.card[_ngcontent-%COMP%]:hover{box-shadow:2px 0 30px rgba(0,0,0,.9)}.card__team-name[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:44px;text-transform:uppercase;letter-spacing:15px;margin-right:-15px;color:#000}@media (max-width:575px){.card__team-name[_ngcontent-%COMP%]{font-size:25px}}@media (min-width:576px){.card__team-name[_ngcontent-%COMP%]{font-size:30px}}@media (min-width:768px){.card__team-name[_ngcontent-%COMP%]{font-size:30px}}@media (min-width:992px){.card__team-name[_ngcontent-%COMP%]{font-size:40px}}.card__team-status[_ngcontent-%COMP%]{position:absolute;margin-top:70px;font-size:18px}.card[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:green}.card[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{animation:brightness 2s infinite}.card[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:red}@keyframes brightness{0%,to{filter:brightness(1)}50%{filter:brightness(1.6)}}"]}),e})();function k(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"ppf-card-team",7),s.NdJ("click",function(){const t=s.CHM(e).$implicit;return s.oxw(2).presenter.redirectGame(t.code)}),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit;s.xp6(1),s.Q6J("teamName",e.name)("active",e.status)}}function y(e,t){if(1&e&&(s.TgZ(0,"div",5),s.YNc(1,k,2,2,"div",6),s._UZ(2,"ppf-card-to-add"),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.presenter.teamSearchResults)}}function Z(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"p",8),s._uU(2),s.qZA(),s._UZ(3,"ppf-card-to-add",9),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.Oqu(e.presenter.messageNoTeams)}}let N=(()=>{class e{constructor(e){this.presenter=e}ngOnInit(){this.presenter.getTeams()}ngOnDestroy(){this.presenter.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(l))},e.\u0275cmp=s.Xpm({type:e,selectors:[["ppf-workspaces"]],features:[s._Bn([l])],decls:5,vars:2,consts:[[1,"workspaces"],[1,"workspaces__searcher",3,"teamToFind","working"],[1,"workspaces__teams"],["class","workspaces__teams--results",4,"ngIf"],[4,"ngIf"],[1,"workspaces__teams--results"],[4,"ngFor","ngForOf"],[3,"teamName","active","click"],[1,"workspaces__teams--empty"],[1,"workspaces__teams--add"]],template:function(e,t){1&e&&(s.TgZ(0,"section",0),s.TgZ(1,"ppf-searcher",1),s.NdJ("teamToFind",function(e){return t.presenter.searchTeam(e)})("working",function(e){return t.presenter.showMessageNoTeams(e,!0)}),s.qZA(),s.TgZ(2,"section",2),s.YNc(3,y,3,1,"div",3),s.YNc(4,Z,4,1,"div",4),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf",t.presenter.teamSearchResults.length),s.xp6(1),s.Q6J("ngIf",t.presenter.noTeams))},directives:[_,x.O5,x.sg,T,b],styles:[".workspaces[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px}.workspaces__searcher[_ngcontent-%COMP%]{align-self:center}.workspaces__teams--results[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;margin-top:60px;margin-left:30px;margin-right:30px}.workspaces__teams--empty[_ngcontent-%COMP%]{text-align:center;margin-top:50px;font-family:Montserrat,sans-serif;font-weight:700;font-size:25px;-webkit-user-select:none;user-select:none}.workspaces__teams--add[_ngcontent-%COMP%], .workspaces__teams--empty[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),e})();var q=n(2346),A=n(8211);let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[m],imports:[[x.ez,g.uH,h.UX,h.u5,p.yb,q.hO.initializeApp(A.N.firebase),d.Bz.forChild([{path:"",component:N}])]]}),e})()}}]);